<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SVG to PNG Converter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />

</head>


<?php include 'includes/navbar.html'; ?>
<nav class="bg-white shadow-md py-4">
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between"
      >
        <div class="flex items-center">
          <a href="/" class="flex items-center">
            <i
              class="fas fa-image text-2xl sm:text-3xl text-blue-800 mr-2 sm:mr-3"
            ></i>
            <span
              class="text-xl sm:text-2xl font-bold text-blue-800 hidden sm:inline"
              >ImgFlow</span
            >
          </a>
        </div>
        <div class="flex items-center">
          <a
            href="/"
            class="bg-blue-600 text-white px-3 py-2 sm:px-4 sm:py-2 rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center text-sm sm:text-base"
          >
            <i class="fas fa-home mr-1 sm:mr-2"></i> Back to Home
          </a>
        </div>
      </div>
    </nav>
<div class="max-w-4xl mx-auto mt-12 mb-12">
  <h1 class="text-3xl font-bold text-gray-800 mb-6">
    SVG to PNG Converter
  </h1>

  <div class="bg-white rounded-lg shadow-md p-6 mb-6">
    <div class="flex flex-col md:flex-row gap-6">
      <div class="w-full md:w-1/2">
        <label class="block text-sm font-medium text-gray-700 mb-2">Upload SVG</label>
        <div class="flex items-center justify-center w-full">
          <label
            class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 transition">
            <div class="flex flex-col items-center justify-center pt-5 pb-6" id="upload-area">
              <svg class="w-8 h-8 mb-4 text-gray-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                viewBox="0 0 20 16">
                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2" />
              </svg>
              <p class="mb-2 text-sm text-gray-500">
                Click to upload or drag and drop
              </p>
              <p class="text-xs text-gray-500">SVG files only</p>
            </div>
            <input id="file-input" type="file" class="hidden" accept=".svg, image/svg+xml" />
          </label>
        </div>

        <div class="mt-4" id="svg-preview-container" style="display: none">
          <label class="block text-sm font-medium text-gray-700 mb-2">SVG Preview</label>
          <div class="border-2 border-gray-200 rounded-lg overflow-hidden p-4 bg-gray-50">
            <div id="svg-preview" class="flex items-center justify-center"></div>
          </div>
        </div>
      </div>

      <div class="w-full md:w-1/2">
        <div class="mb-4">
          <label for="width" class="block text-sm font-medium text-gray-700 mb-2">Width (pixels)</label>
          <input type="number" id="width" min="10" max="5000" value="800"
            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <div class="mb-4">
          <label for="height" class="block text-sm font-medium text-gray-700 mb-2">Height (pixels)</label>
          <input type="number" id="height" min="10" max="5000" value="600"
            class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
        </div>

        <div class="mb-4">
          <label class="inline-flex items-center">
            <input type="checkbox" id="maintain-aspect"
              class="rounded border-gray-300 text-blue-600 shadow-sm focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50"
              checked />
            <span class="ml-2 text-sm text-gray-700">Maintain aspect ratio</span>
          </label>
        </div>

        <div class="border-2 border-gray-200 rounded-lg overflow-hidden p-4 bg-gray-50">
          <div id="png-preview-container" style="display: none">
            <label class="block text-sm font-medium text-gray-700 mb-2">PNG Preview</label>
            <div class="border border-gray-300 rounded-lg overflow-hidden">
              <img id="png-preview" class="w-full" alt="PNG Preview" />
            </div>
          </div>
          <div id="conversion-status" class="text-center py-8 text-gray-500">
            <p>PNG preview will appear here after conversion</p>
          </div>
        </div>
      </div>
    </div>

    <div class="mt-6 flex justify-center gap-4">
      <button id="convert-btn"
        class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
        disabled>
        Convert to PNG
      </button>
      <button id="download-btn"
        class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition disabled:opacity-50 disabled:cursor-not-allowed"
        disabled>
        Download PNG
      </button>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6">
    <h2 class="text-xl font-semibold text-gray-800 mb-4">
      About SVG to PNG Conversion
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div class="bg-blue-50 p-4 rounded-lg">
        <h3 class="font-medium text-blue-800 mb-2">
          When to Convert SVG to PNG
        </h3>
        <ul class="list-disc pl-5 text-blue-700">
          <li>When you need a raster image format</li>
          <li>For compatibility with older systems</li>
          <li>
            When working with complex SVGs that don't render consistently
          </li>
          <li>For print materials requiring specific dimensions</li>
        </ul>
      </div>
      <div class="bg-yellow-50 p-4 rounded-lg">
        <h3 class="font-medium text-yellow-800 mb-2">Limitations</h3>
        <ul class="list-disc pl-5 text-yellow-700">
          <li>PNG is raster format - loses scalability</li>
          <li>Large PNG files may result from complex SVGs</li>
          <li>Transparency support depends on SVG complexity</li>
        </ul>
      </div>
    </div>
  </div>
</div>
<?php include 'includes/footer.html'; ?>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const fileInput = document.getElementById("file-input");
    const uploadArea = document.getElementById("upload-area");
    const svgPreview = document.getElementById("svg-preview");
    const svgPreviewContainer = document.getElementById(
      "svg-preview-container"
    );
    const pngPreview = document.getElementById("png-preview");
    const pngPreviewContainer = document.getElementById(
      "png-preview-container"
    );
    const conversionStatus = document.getElementById("conversion-status");
    const convertBtn = document.getElementById("convert-btn");
    const downloadBtn = document.getElementById("download-btn");
    const widthInput = document.getElementById("width");
    const heightInput = document.getElementById("height");
    const maintainAspectCheckbox =
      document.getElementById("maintain-aspect");

    let svgFile = null;
    let svgContent = "";
    let pngBlob = null;
    let originalWidth = 0;
    let originalHeight = 0;
    let aspectRatio = 1;

    // Handle file upload
    fileInput.addEventListener("change", function (e) {
      if (e.target.files && e.target.files[0]) {
        svgFile = e.target.files[0];

        // Validate file type
        if (
          !svgFile.type.includes("svg") &&
          !svgFile.name.endsWith(".svg")
        ) {
          alert("Please upload an SVG file");
          return;
        }

        const reader = new FileReader();
        reader.onload = function (event) {
          svgContent = event.target.result;

          // Display SVG preview
          svgPreview.innerHTML = svgContent;
          svgPreviewContainer.style.display = "block";

          // Get original dimensions from SVG
          const parser = new DOMParser();
          const svgDoc = parser.parseFromString(
            svgContent,
            "image/svg+xml"
          );
          const svgElement = svgDoc.querySelector("svg");

          if (svgElement) {
            originalWidth =
              parseInt(svgElement.getAttribute("width")) ||
              parseInt(svgElement.viewBox.baseVal.width) ||
              800;
            originalHeight =
              parseInt(svgElement.getAttribute("height")) ||
              parseInt(svgElement.viewBox.baseVal.height) ||
              600;
            aspectRatio = originalWidth / originalHeight;

            // Set initial dimensions maintaining aspect ratio
            if (maintainAspectCheckbox.checked) {
              const newHeight = Math.round(
                parseInt(widthInput.value) / aspectRatio
              );
              heightInput.value = newHeight;
            }
          }

          // Enable convert button
          convertBtn.disabled = false;

          // Reset PNG preview
          pngPreviewContainer.style.display = "none";
          conversionStatus.style.display = "block";
          downloadBtn.disabled = true;
          pngBlob = null;
        };
        reader.readAsText(svgFile);
      }
    });

    // Handle dimension changes with aspect ratio locking
    widthInput.addEventListener("input", function () {
      if (maintainAspectCheckbox.checked) {
        const newHeight = Math.round(parseInt(this.value) / aspectRatio);
        heightInput.value = newHeight;
      }
    });

    heightInput.addEventListener("input", function () {
      if (maintainAspectCheckbox.checked) {
        const newWidth = Math.round(parseInt(this.value) * aspectRatio);
        widthInput.value = newWidth;
      }
    });

    // Handle convert button click
    convertBtn.addEventListener("click", function () {
      if (!svgContent) return;

      const width = parseInt(widthInput.value);
      const height = parseInt(heightInput.value);

      if (isNaN(width) || isNaN(height) || width <= 0 || height <= 0) {
        alert("Please enter valid dimensions");
        return;
      }

      convertSvgToPng(svgContent, width, height);
    });

    // Handle download button click
    downloadBtn.addEventListener("click", function () {
      if (!pngBlob) return;

      const link = document.createElement("a");
      link.download = svgFile.name.replace(".svg", "") + ".png";
      link.href = URL.createObjectURL(pngBlob);
      link.click();
    });

    // SVG to PNG conversion function
    function convertSvgToPng(svgData, width, height) {
      const canvas = document.createElement("canvas");
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext("2d");

      // Create an image from the SVG data
      const img = new Image();
      img.onload = function () {
        // Draw the image on canvas
        ctx.drawImage(img, 0, 0, width, height);

        // Convert canvas to PNG
        canvas.toBlob(function (blob) {
          pngBlob = blob;
          const pngUrl = URL.createObjectURL(blob);

          // Show PNG preview
          pngPreview.src = pngUrl;
          pngPreviewContainer.style.display = "block";
          conversionStatus.style.display = "none";

          // Enable download button
          downloadBtn.disabled = false;
        }, "image/png");
      };

      // Create a Blob from the SVG data
      const svgBlob = new Blob([svgData], { type: "image/svg+xml" });
      img.src = URL.createObjectURL(svgBlob);
    }

    // Drag and drop functionality
    uploadArea.addEventListener("dragover", function (e) {
      e.preventDefault();
      this.classList.add("border-blue-500", "bg-blue-50");
    });

    uploadArea.addEventListener("dragleave", function (e) {
      e.preventDefault();
      this.classList.remove("border-blue-500", "bg-blue-50");
    });

    uploadArea.addEventListener("drop", function (e) {
      e.preventDefault();
      this.classList.remove("border-blue-500", "bg-blue-50");

      if (e.dataTransfer.files && e.dataTransfer.files[0]) {
        fileInput.files = e.dataTransfer.files;
        const event = new Event("change");
        fileInput.dispatchEvent(event);
      }
    });
  });
</script>
</body>

</html>
