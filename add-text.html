<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Image Text Overlay Tool</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>


<?php include 'includes/navbar.html'; ?>
<nav class="bg-white shadow-md py-4">
      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between"
      >
        <div class="flex items-center">
          <a href="/" class="flex items-center">
            <i
              class="fas fa-image text-2xl sm:text-3xl text-blue-800 mr-2 sm:mr-3"
            ></i>
            <span
              class="text-xl sm:text-2xl font-bold text-blue-800 hidden sm:inline"
              >ImgFlow</span
            >
          </a>
        </div>
        <div class="flex items-center">
          <a
            href="/"
            class="bg-blue-600 text-white px-3 py-2 sm:px-4 sm:py-2 rounded-md hover:bg-blue-700 transition-colors duration-200 flex items-center text-sm sm:text-base"
          >
            <i class="fas fa-home mr-1 sm:mr-2"></i> Back to Home
          </a>
        </div>
      </div>
    </nav>

<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold text-center mb-8">
    Image Text Overlay Tool
  </h1>

  <div class="bg-white rounded-lg shadow-lg p-6 max-w-4xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <!-- Controls Section -->
      <div class="space-y-4">
        <!-- Image Upload -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Upload Image</label>
          <input type="file" id="imageUpload" accept="image/*"
            class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
        </div>

        <!-- Text Input -->
        <div class="space-y-2">
          <label for="textInput" class="block text-sm font-medium text-gray-700">Text to Add</label>
          <input type="text" id="textInput" placeholder="Enter your text here"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border" />
        </div>

        <!-- Text Color -->
        <div class="space-y-2">
          <label for="textColor" class="block text-sm font-medium text-gray-700">Text Color</label>
          <input type="color" id="textColor" value="#ffffff" class="h-10 w-full" />
        </div>

        <!-- Background Color -->
        <div class="space-y-2">
          <label for="backgroundColor" class="block text-sm font-medium text-gray-700">Background Color</label>
          <input type="color" id="backgroundColor" value="#00000000" class="h-10 w-full" />
        </div>

        <!-- Font Size -->
        <div class="space-y-2">
          <label for="fontSize" class="block text-sm font-medium text-gray-700">Font Size (px)</label>
          <input type="range" id="fontSize" min="10" max="100" value="32" class="w-full" />
          <span id="fontSizeValue">32px</span>
        </div>

        <!-- Font Family -->
        <div class="space-y-2">
          <label for="fontFamily" class="block text-sm font-medium text-gray-700">Font Family</label>
          <select id="fontFamily"
            class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm p-2 border">
            <option value="Arial, sans-serif">Arial</option>
            <option value="Times New Roman, serif">Times New Roman</option>
            <option value="Courier New, monospace">Courier New</option>
            <option value="Georgia, serif">Georgia</option>
            <option value="Verdana, sans-serif">Verdana</option>
            <option value="Impact, sans-serif">Impact</option>
          </select>
        </div>

        <!-- Text Position -->
        <div class="space-y-2">
          <label class="block text-sm font-medium text-gray-700">Text Position</label>
          <div class="grid grid-cols-3 gap-2">
            <button data-position="top-left" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Top Left
            </button>
            <button data-position="top-center" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Top Center
            </button>
            <button data-position="top-right" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Top Right
            </button>
            <button data-position="center-left" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Center Left
            </button>
            <button data-position="center" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Center
            </button>
            <button data-position="center-right" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Center Right
            </button>
            <button data-position="bottom-left" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Bottom Left
            </button>
            <button data-position="bottom-center" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Bottom Center
            </button>
            <button data-position="bottom-right" class="position-btn p-2 bg-gray-200 rounded hover:bg-gray-300">
              Bottom Right
            </button>
          </div>
        </div>

        <!-- Download Button -->
        <button id="downloadBtn" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
          Download Image
        </button>
      </div>

      <!-- Preview Section -->
      <div class="space-y-4">
        <label class="block text-sm font-medium text-gray-700">Preview</label>
        <div id="imagePreviewContainer"
          class="relative border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center min-h-64 bg-gray-50">
          <p id="defaultText" class="text-gray-400">
            Your image will appear here
          </p>
          <img id="uploadedImage" class="hidden max-w-full max-h-96 object-contain" alt="Uploaded image" />
          <div id="textOverlay" class="absolute p-2 pointer-events-none hidden"></div>
        </div>
      </div>
    </div>
  </div>
</div>
<?php include 'includes/footer.html'; ?>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // DOM Elements
    const imageUpload = document.getElementById("imageUpload");
    const textInput = document.getElementById("textInput");
    const textColor = document.getElementById("textColor");
    const backgroundColor = document.getElementById("backgroundColor");
    const fontSize = document.getElementById("fontSize");
    const fontSizeValue = document.getElementById("fontSizeValue");
    const fontFamily = document.getElementById("fontFamily");
    const positionButtons = document.querySelectorAll(".position-btn");
    const downloadBtn = document.getElementById("downloadBtn");
    const imagePreviewContainer = document.getElementById(
      "imagePreviewContainer"
    );
    const uploadedImage = document.getElementById("uploadedImage");
    const defaultText = document.getElementById("defaultText");
    const textOverlay = document.getElementById("textOverlay");

    // Current settings
    let currentPosition = "center";

    // Update font size display
    fontSize.addEventListener("input", function () {
      fontSizeValue.textContent = `${this.value}px`;
      updateTextOverlay();
    });

    // Handle image upload
    imageUpload.addEventListener("change", function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function (event) {
          uploadedImage.src = event.target.result;
          uploadedImage.classList.remove("hidden");
          defaultText.classList.add("hidden");
          textOverlay.classList.remove("hidden");
          updateTextOverlay();
        };
        reader.readAsDataURL(file);
      }
    });

    // Update text overlay when any control changes
    [textInput, textColor, backgroundColor, fontFamily].forEach(
      (element) => {
        element.addEventListener("input", updateTextOverlay);
      }
    );

    // Handle position buttons
    positionButtons.forEach((button) => {
      button.addEventListener("click", function (e) {
        e.preventDefault();
        currentPosition = this.getAttribute("data-position");
        updateTextOverlay();
      });
    });

    // Update the text overlay with current settings
    function updateTextOverlay() {
      if (!uploadedImage.src) return;

      textOverlay.textContent = textInput.value;
      textOverlay.style.color = textColor.value;
      textOverlay.style.backgroundColor = backgroundColor.value;
      textOverlay.style.fontSize = `${fontSize.value}px`;
      textOverlay.style.fontFamily = fontFamily.value;

      // Set position
      textOverlay.style.position = "absolute";
      textOverlay.style.padding = "8px";
      textOverlay.style.borderRadius = "4px";

      // Reset all positioning
      textOverlay.style.top = "";
      textOverlay.style.bottom = "";
      textOverlay.style.left = "";
      textOverlay.style.right = "";
      textOverlay.style.transform = "";

      switch (currentPosition) {
        case "top-left":
          textOverlay.style.top = "10px";
          textOverlay.style.left = "10px";
          break;
        case "top-center":
          textOverlay.style.top = "10px";
          textOverlay.style.left = "50%";
          textOverlay.style.transform = "translateX(-50%)";
          break;
        case "top-right":
          textOverlay.style.top = "10px";
          textOverlay.style.right = "10px";
          break;
        case "center-left":
          textOverlay.style.top = "50%";
          textOverlay.style.left = "10px";
          textOverlay.style.transform = "translateY(-50%)";
          break;
        case "center":
          textOverlay.style.top = "50%";
          textOverlay.style.left = "50%";
          textOverlay.style.transform = "translate(-50%, -50%)";
          break;
        case "center-right":
          textOverlay.style.top = "50%";
          textOverlay.style.right = "10px";
          textOverlay.style.transform = "translateY(-50%)";
          break;
        case "bottom-left":
          textOverlay.style.bottom = "10px";
          textOverlay.style.left = "10px";
          break;
        case "bottom-center":
          textOverlay.style.bottom = "10px";
          textOverlay.style.left = "50%";
          textOverlay.style.transform = "translateX(-50%)";
          break;
        case "bottom-right":
          textOverlay.style.bottom = "10px";
          textOverlay.style.right = "10px";
          break;
      }
    }

    // Handle download
    downloadBtn.addEventListener("click", function () {
      if (!uploadedImage.src) {
        alert("Please upload an image first");
        return;
      }

      // Use html2canvas to capture the preview container with the overlay
      html2canvas(imagePreviewContainer).then((canvas) => {
        const link = document.createElement("a");
        link.download = "image-with-text.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    });
  });
</script>
</body>

</html>
